(function(e,r){e.extend(true,r.Grid.prototype,{_createHeaderWidthRow:function(){var r=e("<tr>").addClass(this.headerRowClass);this._eachField(function(t,s){var a=e("<th>").width(t.width).height(0).appendTo(r)});return r},_createHeaderRow:function(){var r=this;if(e.isFunction(this.headerRowRenderer))return e(this.renderTemplate(this.headerRowRenderer,this));this.groupHeaders=this.groupHeaders||[];if(this.groupHeaders.length>0){var t=[];e.each(this.groupHeaders,function(e,s){var a={};a.name=s.name;a.items=[r._normalizeField(s.startColumnName)];a.startIndex=r._visibleFieldIndex(a.items[0]);a.width=a.items[0].width;for(var i=1;i<s.numberOfColumns;i++){var d=r._normalizeField(a.startIndex+i);a.width+=d.width;a.items.push(d)}t.push(a)});this._group=t}function s(t,s){t.addClass(r.sortableClass).on("click",e.proxy(function(){r._clearSortingCss();r._setSortingParams(s,s.order);t.addClass(r._sortOrder==="asc"?r.sortAscClass:r.sortDescClass);r._loadStrategy.sort()},this))}var a=e("<tr>").addClass(this.headerRowClass);this._eachField(function(r,t){var i=this._prepareCell("<th>",r,"headercss",this.headerCellClass).append(this.renderTemplate(r.headerTemplate,r));if(this.sorting&&r.sorting){s(i,r)}if(this._group.length>0){var d=this._group.filter(function(t){return e.inArray(r.name,t.items.map(function(e){return e.name}))!=-1})[0];if(d){if(t!=d.startIndex)return;i=e("<th>").addClass(this.headerCellClass||"headercss").css("border-bottom","1px solid #e9e9e9").append(d.name);i.attr("colspan",d.items.length);i.css("width",d.width)}else{i.attr("rowspan",2)}}a.append(i)});if(this._group.length>0){var i=e("<tr>").addClass(this.headerRowClass);e.each(this._group,function(t,a){e.each(a.items,function(e,t){var a=r._prepareCell("<th>",t,"headercss",r.headerCellClass).append(r.renderTemplate(t.headerTemplate,t));if(this.sorting&&t.sorting){s(a,t)}i.append(a)})});a.after(i)}return a},_createHeader:function(){var r=this._headerRow=this._createHeaderRow(),t=this._filterRow=this._createFilterRow(),s=this._insertRow=this._createInsertRow();var a=this._headerGrid=e("<table>").addClass(this.tableClass).append(this._createHeaderWidthRow()).append(r).append(t).append(s);var i=this._header=e("<div>").addClass(this.gridHeaderClass).addClass(this._scrollBarWidth()?"jsgrid-header-scrollbar":"").append(a);return i}})})(jQuery,jsGrid);