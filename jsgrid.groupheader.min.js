(function(e,r){e.extend(true,r.Grid.prototype,{_createHeaderWidthRow:function(){var r=e("<tr>").addClass(this.headerRowClass);this._eachField(function(t,a){var s=e("<th>").width(t.width).height(0).appendTo(r)});return r},_createHeaderRow:function(){var r=this;if(e.isFunction(this.headerRowRenderer))return e(this.renderTemplate(this.headerRowRenderer,this));this.groupHeaders=this.groupHeaders||[];this._group=[];if(this.groupHeaders.length>0){e.each(this.groupHeaders,function(e,t){var a={};a.name=t.name;a.items=[r._normalizeField(t.startColumnName)];a.startIndex=r._visibleFieldIndex(a.items[0]);a.width=a.items[0].width;for(var s=1;s<t.numberOfColumns;s++){var i=r._normalizeField(a.startIndex+s);a.width+=i.width;a.items.push(i)}r._group.push(a)})}function t(t,a){t.addClass(r.sortableClass).on("click",e.proxy(function(){r._clearSortingCss();r._setSortingParams(a,a.order);t.addClass(r._sortOrder==="asc"?r.sortAscClass:r.sortDescClass);r._loadStrategy.sort()},this))}var a=e("<thead>").append(r._createHeaderWidthRow());var s=e("<tr>").addClass(this.headerRowClass);this._eachField(function(r,a){var i=this._prepareCell("<th>",r,"headercss",this.headerCellClass).append(this.renderTemplate(r.headerTemplate,r));if(this.sorting&&r.sorting){t(i,r)}if(this._group.length>0){var d=this._group.filter(function(t){return e.inArray(r.name,t.items.map(function(e){return e.name}))!=-1})[0];if(d){if(a!=d.startIndex)return;i=e("<th>").addClass(this.headerCellClass||"headercss").css("border-bottom","1px solid #e9e9e9").append(d.name);i.attr("colspan",d.items.length);i.css("width",d.width)}else{i.attr("rowspan",2)}}s.append(i)});a.append(s);if(this._group.length>0){var i=e("<tr>").addClass(this.headerRowClass);e.each(this._group,function(a,s){e.each(s.items,function(e,a){var s=r._prepareCell("<th>",a,"headercss",r.headerCellClass).append(r.renderTemplate(a.headerTemplate,a));if(this.sorting&&a.sorting){t(s,a)}i.append(s)})});a.append(i)}return a},_createHeader:function(){var r=this._headerRow=this._createHeaderRow(),t=this._filterRow=this._createFilterRow(),a=this._insertRow=this._createInsertRow();var s=this._headerGrid=e("<table>").addClass(this.tableClass).append(r).append(t).append(a);var i=this._header=e("<div>").addClass(this.gridHeaderClass).addClass(this._scrollBarWidth()?"jsgrid-header-scrollbar":"").append(s);return i}})})(jQuery,jsGrid);