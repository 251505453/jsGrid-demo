(function(e,r){e.extend(true,r.Grid.prototype,{_createHeaderWidthRow:function(){var r=e("<tr>").addClass(this.headerRowClass);this._eachField(function(t,a){var s=e("<th>").width(t.width).height(0).appendTo(r)});return r},_createHeaderRow:function(){var r=this;if(e.isFunction(this.headerRowRenderer))return e(this.renderTemplate(this.headerRowRenderer,this));this.groupHeaders=this.groupHeaders||[];if(this.groupHeaders.length>0){var t=[];e.each(this.groupHeaders,function(e,a){var s={};s.name=a.name;s.items=[r._normalizeField(a.startColumnName)];s.startIndex=r._visibleFieldIndex(s.items[0]);s.width=s.items[0].width;for(var i=1;i<a.numberOfColumns;i++){var d=r._normalizeField(s.startIndex+i);s.width+=d.width;s.items.push(d)}t.push(s)});this._group=t}function a(t,a){t.addClass(r.sortableClass).on("click",e.proxy(function(){r._clearSortingCss();r._setSortingParams(a,a.order);t.addClass(r._sortOrder==="asc"?r.sortAscClass:r.sortDescClass);r._loadStrategy.sort()},this))}var s=e("<thead>").append(r._createHeaderWidthRow());var i=e("<tr>").addClass(this.headerRowClass);this._eachField(function(r,t){var s=this._prepareCell("<th>",r,"headercss",this.headerCellClass).append(this.renderTemplate(r.headerTemplate,r));if(this.sorting&&r.sorting){a(s,r)}if(this._group.length>0){var d=this._group.filter(function(t){return e.inArray(r.name,t.items.map(function(e){return e.name}))!=-1})[0];if(d){if(t!=d.startIndex)return;s=e("<th>").addClass(this.headerCellClass||"headercss").css("border-bottom","1px solid #e9e9e9").append(d.name);s.attr("colspan",d.items.length);s.css("width",d.width)}else{s.attr("rowspan",2)}}i.append(s)});s.append(i);if(this._group.length>0){var d=e("<tr>").addClass(this.headerRowClass);e.each(this._group,function(t,s){e.each(s.items,function(e,t){var s=r._prepareCell("<th>",t,"headercss",r.headerCellClass).append(r.renderTemplate(t.headerTemplate,t));if(this.sorting&&t.sorting){a(s,t)}d.append(s)})});s.append(d)}return s},_createHeader:function(){var r=this._headerRow=this._createHeaderRow(),t=this._filterRow=this._createFilterRow(),a=this._insertRow=this._createInsertRow();var s=this._headerGrid=e("<table>").addClass(this.tableClass).append(r).append(t).append(a);var i=this._header=e("<div>").addClass(this.gridHeaderClass).addClass(this._scrollBarWidth()?"jsgrid-header-scrollbar":"").append(s);return i}})})(jQuery,jsGrid);